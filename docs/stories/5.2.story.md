# Story 5.2: Main Navigation Structure

## Status
Ready for Review

## Story

**As an** administrator,
**I want** clear navigation between all major sections of the dashboard,
**so that** I can quickly switch between incidents, users, categories, and my profile.

## Acceptance Criteria

1. Navigation component created (sidebar or top navbar)
2. Navigation links:
   - "Panel" → `/dashboard` (home icon)
   - "Incidentes" → `/dashboard/incidents` (list icon)
   - "Usuarios" → `/dashboard/users` (users icon)
   - "Categorías" → `/dashboard/categories` (tag icon)
   - "Mi Perfil" → `/dashboard/profile` (user icon)
3. Active route highlighted with different background/text color
4. Navigation visible on all dashboard pages (persistent layout)
5. Mobile responsiveness: navigation collapses to hamburger menu on small screens (Post-MVP: acceptable if not perfect for MVP)
6. Icons used from Lucide React or Heroicons (consistent icon set)
7. User info displayed in navigation (name, role badge)
8. "Cerrar sesión" button in navigation (handled in Story 5.3)

## Tasks / Subtasks

- [x] Create navigation component (AC: 1, 2, 6)
  - [x] Create `/src/components/layout/Sidebar.tsx` component
  - [x] Define navigation links array with labels, paths, and icons
  - [x] Use icons from Lucide React: Home, FileText, Users, Tag, User, LogOut
  - [x] Render navigation as sidebar (vertical layout)
  - [x] Style with Tailwind CSS (width, padding, borders)
- [x] Implement active route highlighting (AC: 3)
  - [x] Use Next.js `usePathname()` hook to get current route
  - [x] Apply conditional styling to active link (different background/text color)
  - [x] Active link should be visually distinct (e.g., primary color background)
- [x] Display user info in navigation (AC: 7)
  - [x] **IMPORTANT: Use mock user data - do not call real auth context yet**
  - [x] Mock user: `{ name: "Admin User", email: "admin@ofraud.com", role: "Administrador" }`
  - [x] Display user info at top of sidebar (avatar placeholder, name, role badge)
  - [x] Use shadcn/ui Badge component for role display
  - [x] Avatar can be placeholder initials or icon
- [x] Add "Cerrar sesión" button placeholder (AC: 8)
  - [x] Add button at bottom of sidebar with logout icon and text "Cerrar sesión"
  - [x] **IMPORTANT: Leave onClick handler empty or with console.log for now**
  - [x] Note: Full logout functionality will be implemented in Story 5.3
  - [x] Style as secondary/ghost button
- [x] Integrate navigation into dashboard layout (AC: 4)
  - [x] Update `/src/app/(dashboard)/layout.tsx` to include Sidebar component
  - [x] Layout should render Sidebar + main content area (flex layout)
  - [x] Sidebar should be persistent across all dashboard pages
- [x] Implement basic mobile responsiveness (AC: 5)
  - [x] **IMPORTANT: Basic implementation acceptable for MVP**
  - [x] Hide sidebar on mobile by default (use Tailwind responsive classes `hidden lg:block`)
  - [x] Add hamburger menu button for mobile (top-left of page)
  - [x] Hamburger toggles sidebar visibility (use state: `useState<boolean>`)
  - [x] Mobile sidebar overlay (fixed position, slide-in animation optional)
  - [x] Note: Post-MVP will refine mobile UX
- [x] Style navigation component (AC: 1, 2, 3, 6, 7)
  - [x] Sidebar background color (light gray or white with border)
  - [x] Link hover states (subtle background change)
  - [x] Icon + text layout (horizontal flex with gap)
  - [x] Consistent spacing (padding, gaps)
  - [x] Typography: medium font weight for labels
  - [x] User info section styled with proper hierarchy

## Dev Notes

### User Instructions - CRITICAL
**MOCK DATA ONLY**: The user has explicitly requested that this story use mock data for frontend testing. DO NOT make real API calls to auth context or backend. DO NOT add restrictions based on backend functionality. Use hardcoded mock user data for display. The backend will not be connected until the end of the project.

### Tech Stack
[Source: architecture/tech-stack.md]
- **Framework**: Next.js 15.5.4 with App Router
- **Language**: TypeScript 5.9.3 (strict mode)
- **Styling**: Tailwind CSS 4.1.14
- **UI Components**: shadcn/ui (Badge, Button, Sheet for mobile menu)
- **Icons**: Lucide React (Home, FileText, Users, Tag, User, LogOut, Menu)
- **Routing**: Next.js `usePathname()` hook for active route detection
- **State Management**: React useState for mobile menu toggle

### Source Tree / File Locations
[Source: architecture/source-tree.md]
- **Component**: `/src/components/layout/Sidebar.tsx` (create new)
- **Layout**: `/src/app/(dashboard)/layout.tsx` (modify to include Sidebar)
- **Mock Data**: Create `/src/lib/mock/userData.ts` (create new for mock user)

### Component Specifications

**Sidebar Component Structure**:
```typescript
interface SidebarProps {
  className?: string;
}

interface NavLink {
  label: string;
  path: string;
  icon: React.ReactNode;
}
```

**Navigation Links Array**:
```typescript
const navLinks: NavLink[] = [
  { label: "Panel", path: "/dashboard", icon: <Home size={20} /> },
  { label: "Incidentes", path: "/dashboard/incidents", icon: <FileText size={20} /> },
  { label: "Usuarios", path: "/dashboard/users", icon: <Users size={20} /> },
  { label: "Categorías", path: "/dashboard/categories", icon: <Tag size={20} /> },
  { label: "Mi Perfil", path: "/dashboard/profile", icon: <User size={20} /> },
];
```

**Active Route Logic**:
```typescript
const pathname = usePathname();
const isActive = (path: string) => pathname === path || pathname.startsWith(path + "/");
```

**User Info Display**:
- Position: Top of sidebar (above navigation links)
- Layout: Vertical stack (avatar, name, role badge)
- Avatar: Circle with initials or user icon placeholder
- Name: Bold text, truncate if too long
- Role Badge: Use shadcn/ui Badge with secondary variant

### Mock Data Structure
[Source: User requirements - frontend testing with mock data]

Create `/src/lib/mock/userData.ts`:
```typescript
export const mockCurrentUser = {
  id: "1",
  name: "Admin User",
  email: "admin@ofraud.com",
  role: "Administrador",
  initials: "AU", // For avatar placeholder
};
```

### Layout Integration
[Source: architecture/source-tree.md]
- Modify `/src/app/(dashboard)/layout.tsx`:
  - Import Sidebar component
  - Layout structure: `<div className="flex"><Sidebar /><main>...</main></div>`
  - Main content area should have appropriate padding and max-width
  - Sidebar should have fixed width on desktop (e.g., 256px or 280px)

### Mobile Responsiveness
[Source: AC 5, user requirements]
- **Desktop** (lg breakpoint and up): Sidebar always visible, fixed width
- **Mobile/Tablet** (below lg): Sidebar hidden by default, hamburger menu button visible
- Hamburger button: Top-left corner, use Menu icon from Lucide React
- Mobile sidebar: Use shadcn/ui Sheet component for slide-in drawer (recommended) OR custom overlay with state
- Sheet is easier to implement: `<Sheet><SheetTrigger><Menu /></SheetTrigger><SheetContent side="left"><Sidebar /></SheetContent></Sheet>`

### Styling Guidelines
[Source: architecture/coding-standards.md]
- **Sidebar**:
  - Width: `w-64` (256px) on desktop
  - Background: `bg-white` with `border-r border-gray-200`
  - Height: `h-screen` (full viewport height)
  - Padding: `p-4` or `p-6`
- **Navigation Links**:
  - Default: `flex items-center gap-3 px-4 py-2 rounded-md text-gray-700 hover:bg-gray-100`
  - Active: `bg-primary text-white hover:bg-primary/90` (or similar primary color)
  - Transition: `transition-colors duration-200`
- **User Info Section**:
  - Border bottom or background to separate from nav links
  - Avatar: `w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center`
  - Name: `text-sm font-medium`
  - Role badge: `text-xs`
- **Logout Button**:
  - Position: Bottom of sidebar (use `mt-auto` in flex column layout)
  - Style: Ghost or secondary variant
  - Full width button

### Coding Standards
[Source: architecture/coding-standards.md]
- TypeScript strict mode - all props typed
- Functional components only
- Extract navigation links into constant array
- Use `usePathname()` from `next/navigation` for active route
- Props destructuring
- Use `cn()` utility for conditional class names
- Icons from Lucide React with consistent size (20px recommended)

### Accessibility
[Source: architecture/coding-standards.md]
- Use semantic HTML: `<nav>`, `<ul>`, `<li>` for navigation structure
- Links should be `<Link>` from Next.js (use `href` prop)
- ARIA labels for icons (or text labels sufficient)
- Keyboard navigation support (Tab key)
- Focus visible on links (Tailwind `focus:ring-2`)
- Hamburger menu button should have aria-label "Abrir menú"

### Testing
[Source: architecture/coding-standards.md, PRD requirements]
**Manual Testing for MVP**:
- Sidebar renders on all dashboard pages
- Navigation links navigate correctly
- Active route is highlighted with distinct color
- User info displays mock data (name, role badge)
- "Cerrar sesión" button is visible (doesn't need to work yet)
- Hover states work on navigation links
- Mobile: Hamburger menu appears on small screens
- Mobile: Clicking hamburger opens sidebar
- Mobile: Clicking link closes sidebar (if using Sheet)
- Desktop: Sidebar is always visible, no hamburger
- Responsive breakpoints work (test at 1024px, 768px, 375px widths)

### Notes from Previous Stories
- Dashboard layout file already exists from previous epics
- May need to check if layout already has some navigation structure (update if exists, don't duplicate)
- Keep navigation consistent with existing design patterns in app
- Icons should match those potentially used in dashboard metrics (Story 5.1)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-12 | 1.0 | Initial story draft created with mock data requirements | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
claude-sonnet-4-5-20250929

### Debug Log References
None

### Completion Notes List
- Created Sidebar component with full navigation structure
- Implemented mobile responsiveness using shadcn/ui Sheet component
- Added mock user data display with avatar initials
- Active route highlighting working correctly
- All navigation links functional

### File List
- Created: `/src/components/layout/Sidebar.tsx`
- Created: `/src/lib/mock/userData.ts`
- Modified: `/src/app/(dashboard)/layout.tsx`
- Added: `/src/components/ui/sheet.tsx` (shadcn/ui)

## QA Results
_To be filled by QA agent_
