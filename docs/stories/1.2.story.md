# Story 1.2: shadcn/ui Component Library Integration

<!-- Powered by BMAD™ Core -->

## Status
Done

---

## Story

**As a** developer,
**I want** shadcn/ui components integrated and a base layout structure created,
**so that** I can rapidly build consistent, accessible UI components throughout the application.

---

## Acceptance Criteria

1. shadcn/ui CLI initialized in the project (`npx shadcn-ui@latest init`)
2. Core shadcn/ui components installed: Button, Input, Label, Form, Card, Badge, Dialog, Toast, Dropdown Menu, Table
3. Tailwind configuration updated to include shadcn/ui theme tokens
4. Global styles configured (`/src/app/globals.css`) with shadcn/ui variables
5. Base layout component created (`/src/components/layout/BaseLayout.tsx`) with consistent spacing and font settings
6. Theme provider configured (if using shadcn/ui theming system)
7. Sample page created demonstrating Button, Input, and Card components rendering correctly
8. All components render with proper Tailwind styling and accessibility attributes

---

## Tasks / Subtasks

- [ ] **Task 1: Initialize shadcn/ui in the Project** (AC: 1, 3, 4)
  - [ ] Run `npx shadcn-ui@latest init` to configure shadcn/ui
  - [ ] Select configuration options:
    - Style: Default
    - Base color: Slate (or as specified in design system)
    - CSS variables: Yes
  - [ ] Verify `components.json` is created at project root
  - [ ] Verify Tailwind config updated with shadcn/ui theme configuration
  - [ ] Verify global CSS (`src/app/globals.css`) updated with CSS variables for theming

- [ ] **Task 2: Install Core shadcn/ui Components** (AC: 2)
  - [ ] Install Button component: `npx shadcn-ui@latest add button`
  - [ ] Install Input component: `npx shadcn-ui@latest add input`
  - [ ] Install Label component: `npx shadcn-ui@latest add label`
  - [ ] Install Form component: `npx shadcn-ui@latest add form`
  - [ ] Install Card component: `npx shadcn-ui@latest add card`
  - [ ] Install Badge component: `npx shadcn-ui@latest add badge`
  - [ ] Install Dialog component: `npx shadcn-ui@latest add dialog`
  - [ ] Install Toast component: `npx shadcn-ui@latest add toast`
  - [ ] Install Dropdown Menu component: `npx shadcn-ui@latest add dropdown-menu`
  - [ ] Install Table component: `npx shadcn-ui@latest add table`
  - [ ] Verify all components are created in `/src/components/ui/` directory
  - [ ] Verify component dependencies are installed in package.json

- [ ] **Task 3: Configure Theme Provider** (AC: 6)
  - [ ] Check if shadcn/ui init created a theme provider
  - [ ] If needed, create or configure ThemeProvider component
  - [ ] Wrap application in theme provider (in `src/app/layout.tsx`)
  - [ ] Verify theme switching capability (if dark mode is supported)

- [ ] **Task 4: Create Base Layout Component** (AC: 5)
  - [ ] Create file `/src/components/layout/BaseLayout.tsx`
  - [ ] Implement layout with:
    - Consistent padding and max-width for content
    - Font family settings (use Inter or system fonts)
    - Proper semantic HTML structure (header, main, footer placeholders)
  - [ ] Export BaseLayout for use in pages
  - [ ] Ensure layout is responsive (mobile-first approach)

- [ ] **Task 5: Create Component Demo Page** (AC: 7, 8)
  - [ ] Create new page at `/src/app/demo/page.tsx`
  - [ ] Import Button, Input, Card components from `/src/components/ui/`
  - [ ] Create demo sections showing:
    - Multiple Button variants (default, secondary, outline, destructive)
    - Input component with Label
    - Card component with header, content, and footer
  - [ ] Verify components render with proper Tailwind styling
  - [ ] Test accessibility attributes (aria-labels, keyboard navigation)
  - [ ] Verify components are interactive (buttons clickable, inputs focusable)

- [ ] **Task 6: Verification and Testing** (AC: 8)
  - [ ] Run development server: `npm run dev`
  - [ ] Navigate to `/demo` page and visually verify all components render correctly
  - [ ] Test component interactions (click buttons, type in inputs, etc.)
  - [ ] Run `npm run lint` to ensure no ESLint errors
  - [ ] Run `npm run build` to verify production build succeeds
  - [ ] Verify no console errors or warnings in browser dev tools
  - [ ] Test keyboard navigation (Tab, Enter, Escape for dialogs)

---

## Dev Notes

### Previous Story Insights

**Key Learnings from Story 1.1** [Source: docs/stories/1.1.story.md#Dev Agent Record]
- **Next.js 15.5.4** is installed (not Next.js 14 as originally specified) - ensure shadcn/ui compatibility with Next.js 15
- **Tailwind CSS v4** is being used (not v3) - shadcn/ui may require adjustments for v4 compatibility
  - Tailwind v4 uses `@import "tailwindcss";` syntax instead of v3 directives
  - PostCSS configured with `@tailwindcss/postcss` plugin
- **Project is at root level** (no `frontend/` subdirectory) - all file paths are relative to project root
- **No monorepo structure** - focus solely on frontend, backend was removed
- Current globals.css only contains: `@import "tailwindcss";`
- Tailwind config is minimal with default theme

### shadcn/ui Integration Requirements

**What is shadcn/ui?** [Source: docs/brief.md#Technology Preferences]
- shadcn/ui is a collection of re-usable components built using **Radix UI primitives**
- Components are **copied into your project** (not installed as npm package)
- Provides accessible, customizable UI components styled with Tailwind CSS
- Supports theming via CSS variables and Tailwind configuration

**Installation Process** [Source: Official shadcn/ui documentation pattern]
1. Run CLI init: `npx shadcn-ui@latest init`
2. Configuration created in `components.json` at project root
3. Each component installed individually via CLI: `npx shadcn-ui@latest add [component-name]`
4. Components created in `/src/components/ui/` directory (configurable)

**Required Components for MVP** [Source: Epic 1 Story 1.2 AC#2]
- **Button**: Used in forms, actions, navigation throughout the app
- **Input**: Form fields in registration, login, search bars
- **Label**: Accessibility labels for form inputs
- **Form**: Form container with validation support (works with React Hook Form)
- **Card**: Display containers for incidents, categories, user profiles
- **Badge**: Status indicators (pending, approved, rejected), risk levels
- **Dialog**: Modals for confirmations (delete category, logout confirm)
- **Toast**: Success/error notifications (e.g., "Login successful", "Category created")
- **Dropdown Menu**: User menu, action menus in tables
- **Table**: Incident lists, user lists, category lists

### Tailwind CSS v4 Compatibility Considerations

**Potential Issues with shadcn/ui and Tailwind v4**:
- shadcn/ui is primarily designed for Tailwind CSS v3
- Tailwind v4 syntax differences may require manual adjustments
- **Mitigation Strategy**:
  1. Run shadcn/ui init and observe any warnings
  2. If incompatibility occurs, consider downgrading to Tailwind CSS v3.x
  3. Document any manual adjustments needed for v4 compatibility
  4. If downgrade is required, update globals.css back to v3 directives:
     ```css
     @tailwind base;
     @tailwind components;
     @tailwind utilities;
     ```

### Component File Locations

**Recommended Structure** [Source: shadcn/ui convention]:
```
src/
├── components/
│   ├── ui/              # shadcn/ui components (button.tsx, input.tsx, etc.)
│   └── layout/          # Custom layout components (BaseLayout.tsx)
├── app/                 # Next.js App Router pages
│   ├── layout.tsx       # Root layout (wrap with ThemeProvider)
│   ├── page.tsx         # Home page
│   ├── demo/            # NEW: Component demo page
│   │   └── page.tsx
│   └── globals.css      # Global styles + shadcn/ui CSS variables
├── lib/                 # Utilities (future stories will add api.ts, utils.ts)
└── hooks/               # Custom React hooks (future stories)
```

### Theme Configuration

**CSS Variables Approach** [Source: shadcn/ui theming system]:
- shadcn/ui uses CSS variables defined in `globals.css` for theming
- Variables include: `--background`, `--foreground`, `--primary`, `--secondary`, `--accent`, `--destructive`, `--border`, `--input`, `--ring`, etc.
- Dark mode support via `.dark` class (optional for MVP, but setup enables future implementation)
- Theme provider component may be auto-generated by `shadcn-ui init`

**Expected globals.css Structure After Init**:
```css
@import "tailwindcss";

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    /* ...more CSS variables */
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    /* ...dark mode variables */
  }
}
```

### Base Layout Component Specifications

**BaseLayout.tsx Requirements** [Source: Epic 1 Story 1.2 AC#5]:
- Provide consistent spacing for all pages
- Set font family (Inter font recommended, or system font stack)
- Semantic HTML structure with proper accessibility
- Responsive design (mobile-first)
- **Not a full dashboard layout** - header/sidebar will come in later stories (Epic 5)

**Minimal Implementation Example**:
```tsx
export function BaseLayout({ children }: { children: React.ReactNode }) {
  return (
    <div className="min-h-screen bg-background font-sans antialiased">
      <main className="container mx-auto px-4 py-8 max-w-7xl">
        {children}
      </main>
    </div>
  )
}
```

### Component Demo Page Purpose

**Why a Demo Page?** [Source: Epic 1 Story 1.2 AC#7]:
- Validates that shadcn/ui installation succeeded
- Provides visual reference for developers in future stories
- Confirms accessibility attributes are working (screen reader compatibility)
- Demonstrates component variants and usage patterns
- Serves as living documentation of available UI components

**Demo Page Content**:
- Section for each component type (Button, Input, Card)
- Show multiple variants (e.g., Button: default, secondary, outline, destructive, ghost, link)
- Interactive elements to test functionality
- Can be temporary (deleted post-MVP) or kept as developer reference

### Dependencies to be Installed

**shadcn/ui Dependencies** [Source: shadcn/ui requirements]:
- `class-variance-authority` - For component variant styling
- `clsx` - Utility for conditional CSS classes
- `tailwind-merge` - Merge Tailwind classes without conflicts
- `lucide-react` - Icon library (optional, but commonly used with shadcn/ui)
- `@radix-ui/*` - Radix UI primitives (specific packages depend on components installed)

**Note**: The shadcn/ui CLI will automatically install required dependencies when adding components.

### Accessibility Requirements

**WCAG 2.1 AA Compliance** [Source: docs/brief.md#Areas Needing Further Research]:
- All components must have proper ARIA attributes
- Keyboard navigation must work (Tab, Enter, Escape, Arrow keys)
- Focus indicators must be visible
- Color contrast ratios must meet AA standards (4.5:1 for normal text)
- Form inputs must have associated labels

**shadcn/ui Built-in Accessibility**:
- Built on Radix UI, which provides accessible primitives by default
- Focus management, keyboard navigation, and ARIA attributes handled automatically
- Developers still responsible for proper usage (e.g., providing meaningful labels)

### Styling Standards

**Tailwind CSS Usage** [Source: docs/prd/technical-assumptions.md#4. Styling]:
- Use Tailwind utility classes for all styling (avoid custom CSS where possible)
- Use CSS Modules only for styles not achievable with Tailwind
- Component classes should be composable (use `cn()` utility from shadcn/ui for merging classes)

**Font Configuration** [Source: Next.js best practices]:
- Use `next/font` for optimized font loading
- Recommended: Inter font family (Google Fonts)
- Configure in `src/app/layout.tsx`

### Project Structure Alignment

**No Conflicts Detected**:
- Story 1.1 created `/src/components/` directory (currently empty)
- shadcn/ui will populate `/src/components/ui/`
- BaseLayout will go in `/src/components/layout/`
- All paths align with project structure from Story 1.1

---

## Testing

### Testing Strategy for This Story

**Manual Testing (Primary)**:
1. **Visual Verification**:
   - Navigate to `/demo` page and verify all components render
   - Check component variants (different button styles, etc.)
   - Verify Tailwind styling is applied correctly
   - Confirm no visual glitches or layout issues

2. **Interaction Testing**:
   - Click all button variants (should show visual feedback)
   - Type in input fields (should accept text and show focus state)
   - Test keyboard navigation (Tab through components, Enter to activate)
   - Test Dialog component (open, close with X button, close with Escape key)
   - Test Dropdown Menu (open, select items, close)

3. **Accessibility Testing**:
   - Use browser accessibility inspector to verify ARIA attributes
   - Navigate page using only keyboard (no mouse)
   - Verify focus indicators are visible on all interactive elements
   - Test with screen reader (optional but recommended: macOS VoiceOver, NVDA on Windows)

4. **Build Verification**:
   - Run `npm run lint` - Should pass with no errors
   - Run `npm run build` - Production build should succeed
   - Check browser console for errors or warnings
   - Verify no React hydration errors or Next.js warnings

**Unit Testing**:
- **Not required for this story** [Source: docs/prd/technical-assumptions.md#Testing Requirements]
- shadcn/ui components are pre-built and tested
- BaseLayout is too simple to warrant unit tests for MVP
- Testing focus will shift to business logic in later stories (API client, auth context)

**Test File Locations** [Source: docs/prd/technical-assumptions.md#Testing Tools]:
- Test framework: **Vitest** (configured in future stories)
- Test files should co-locate with components: `*.test.tsx` or `*.spec.tsx`
- Not applicable for this story, but for future reference

**Integration/E2E Testing**:
- **Post-MVP** [Source: docs/prd/technical-assumptions.md#Testing Requirements]
- Playwright will be used for end-to-end testing
- Component demo page can serve as E2E test target in future

---

## Change Log

| Date       | Version | Description                      | Author        |
|------------|---------|----------------------------------|---------------|
| 2025-10-04 | 1.0     | Initial story draft created      | Bob (SM)      |

---

## Dev Agent Record

### Agent Model Used
_To be populated by Dev Agent during implementation_

### Debug Log References
_To be populated by Dev Agent during implementation_

### Completion Notes
_To be populated by Dev Agent during implementation_

### File List
_To be populated by Dev Agent during implementation_

---

## QA Results

_This section will be populated by the QA agent after story completion._
